@using megazlo.Code;
@model IEnumerable<megazlo.Models.Post>
@foreach (var item in Model) {
	<div class="post hentry">
		<h2 class="entry-title">
			<a href="@Url.RouteUrl("Post", new RouteValueDictionary { { "id", item.WebLink } })" rel="bookmark">@item.Title</a></h2>
		<div class="clearfix">
			<div class="entry-meta entry-header">
				<span class="published">Автор <strong>@item.User.NickName</strong></span> <span class="published">От <strong>@item.DatePost.ToShortDateString()</strong></span>
				@if (item.IsCommentable) {
					<span class="comment-count">Комментарии <a href="@Url.RouteUrl("Post", new RouteValueDictionary { { "id", item.WebLink } })#comments">
						@item.Comment.Count</a></span>
		}
				<span class="permalink">→ <a title="@item.Title" href="@Url.RouteUrl("Post", new RouteValueDictionary { { "id", item.WebLink } })">
					Ссылка</a></span>
			</div>
			<div class="entry-content">
				@Html.Raw(item.TextPreview)
				<p>
					<a href="@Url.RouteUrl("Post", new RouteValueDictionary { { "id", item.WebLink } })" class="more-link">Полностью &rarr;</a></p>
				@if (User.IsInRole("Admin")) {
					<div>
						@Html.ActionLink("Редактировать", "EditNews", "Admin", new { id = item.Id }, new { Class = "title" })
						|
						@Html.ActionLink("Удалить", "DeleteNews", "Admin", new { id = item.Id }, new { Class = "title" })
					</div>
		}
			</div>
		</div>
	</div>
}
<div class="navigation page-navigation">
	@Html.PageNavigator((int)ViewBag.PostCount, (int)ViewBag.PageSize, (int)ViewBag.PageNum)
</div>
